{% extends 'base.html' %}
{% block content %}
<h2>All Posts</h2>

{% for post in posts %}
<div style="border:1px solid #ccc; padding:10px; margin-bottom:20px;">
    <strong>{{ users_db[post.email].username }}</strong><br>
    <img src="{{ url_for('static', filename='uploads/posts/' + post.image) }}" width="200"><br>
    <p>{{ post.caption }}</p>

    <p>❤️ {{ post.likes }}</p>
    <a href="{{ url_for('main.like_post', post_id=loop.index0) }}">Like</a>

    <h4>Comments:</h4>
    <ul>
        {% for c in post.comments %}
        <li><b>{{ users_db[c.email].username }}</b>: {{ c.text }}</li>
        {% endfor %}
    </ul>

    <form method="POST" action="{{ url_for('main.comment_post', post_id=loop.index0) }}">
        <input type="text" name="comment" placeholder="Add a comment..." required>
        <button type="submit">Comment</button>
    </form>
</div>
{% endfor %}
{% endblock %}
